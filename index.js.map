{"version":3,"file":"index.js","sources":["../src/js/main.js"],"sourcesContent":["import axios from 'axios';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst KEY = \"47415256-2dfc8fe63cf3afc0ab872a04e\";\nconst URL = \"https://pixabay.com/api/\";\n\nconst form = document.querySelector(\".form\");\nconst list = document.querySelector(\".gallery\");\nconst deleteBtn = document.querySelector(\".but-delete\");\nconst loadMoreBtn = document.querySelector(\".btn-load-more\");\nconst fishListBtn = document.querySelector(\"#fish-list-btn\");\nconst fishListEl = document.querySelector(\"#fish-list\");\n\nlet query = '';\nlet page = 1;\nconst perPage = 20;\n\n\nconst fishList = [\n  \"anchovy\", \"barracuda\", \"bass\", \"bluefish\", \"bream\", \"carp\", \"catfish\", \n  \"chub\", \"cod\", \"dogfish\", \"eel\", \"flounder\", \"grouper\", \"haddock\", \n  \"halibut\", \"herring\", \"kingfish\", \"lamprey\", \"mackerel\", \"mahi-mahi\", \n  \"marlin\", \"minnow\", \"mullet\", \"perch\", \"pike\", \"pollock\", \"salmon\", \n  \"sardine\", \"shark\", \"snapper\", \"sole\", \"sturgeon\", \"sunfish\", \n  \"tarpon\", \"tilapia\", \"trout\", \"tuna\", \"wahoo\", \"whitefish\", \"zander\",\n];\n\nfunction renderFishList() {\n  fishListEl.innerHTML = fishList.map(fish => `<li class=\"fish-list-item\">${fish}</li>`).join('');\n}\n\nfishListBtn.addEventListener(\"click\", () => {\n  fishListEl.classList.toggle(\"active\");\n});\n\nfishListEl.addEventListener(\"click\", (e) => {\n  if (e.target.classList.contains(\"fish-list-item\")) {\n    const selectedFish = e.target.textContent;\n    document.querySelector(\".search-input\").value = selectedFish;\n    fishListEl.classList.remove(\"active\");\n  }\n});\n\nform.addEventListener(\"submit\", async (e) => {\n  e.preventDefault();\n  query = e.target.elements.query.value.trim().toLowerCase();\n\n  if (!fishList.includes(query)) {\n    iziToast.error({ message: \"Please enter the name of a fish.\" });\n    return;\n  }\n\n  page = 1;\n  list.innerHTML = ''; \n  e.target.elements.query.value = ''; \n\n  try {\n    const data = await fetchFishImages(query, page, perPage);\n    if (data.hits.length === 0) {\n      iziToast.info({ message: \"No images found. Try another fish.\" });\n      return;\n    }\n\n    createMarkup(data.hits);\n    new SimpleLightbox(\".gallery a\", { captionsData: \"alt\", captionDelay: 250 });\n    loadMoreBtn.style.display = data.totalHits > perPage ? \"block\" : \"none\";\n\n    window.scrollTo({ top: list.offsetTop, behavior: \"smooth\" });\n  } catch (error) {\n    iziToast.error({ message: \"Something went wrong. Please try again later.\" });\n  }\n});\ndeleteBtn.addEventListener(\"click\", () => {\n  list.innerHTML = ''; \n  loadMoreBtn.style.display = 'none'; \n  iziToast.info({ message: \"Gallery cleared.\" });\n});\n\nloadMoreBtn.addEventListener(\"click\", async () => {\n  page += 1;\n\n  try {\n    const data = await fetchFishImages(query, page, perPage);\n    createMarkup(data.hits);\n    new SimpleLightbox(\".gallery a\", { captionsData: \"alt\", captionDelay: 250 }).refresh();\n\n    if (page * perPage >= data.totalHits) {\n      loadMoreBtn.style.display = 'none';\n      iziToast.info({ message: \"You've reached the end of the results.\" });\n    }\n    window.scrollTo({ top: list.offsetTop + list.scrollHeight, behavior: \"smooth\" });\n  } catch (error) {\n    iziToast.error({ message: \"Error loading more images.\" });\n  }\n});\n\nasync function fetchFishImages(query, page = 1, perPage = 20) {\n  const { data } = await axios.get(URL, {\n    params: {\n      key: KEY,\n      q: query,\n      image_type: \"photo\",\n      orientation: \"horizontal\",\n      page,\n      per_page: perPage,\n    },\n  });\n  return data;\n}\nfunction createMarkup(images) {\n  const markup = images.map(({ largeImageURL, webformatURL, tags, likes, views }) => `\n    <li class=\"list-item\">\n      <a href=\"${largeImageURL}\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n        <div class=\"info\">\n          <p><strong>Likes:</strong> ${likes}</p>\n          <p><strong>Views:</strong> ${views}</p>\n          <p><strong>Tags:</strong> ${tags}</p>\n        </div>\n      </a>\n    </li>\n  `).join(\"\");\n\n  list.insertAdjacentHTML(\"beforeend\", markup);\n}\nrenderFishList();\n"],"names":["KEY","URL","form","list","deleteBtn","loadMoreBtn","fishListBtn","fishListEl","query","page","perPage","fishList","renderFishList","fish","e","selectedFish","iziToast","data","fetchFishImages","createMarkup","SimpleLightbox","axios","images","markup","largeImageURL","webformatURL","tags","likes","views"],"mappings":"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"}